<template>
  <require from="./components/dyn-table"></require>
  <spinner if.bind="isProcessing"></spinner>
  <div if.bind="content">
    <div class="page-header">
      <div class="title">
        Viewing Dashboard - ${content.title ? content.title : 'unknown'}
        <div class="text-small text-secondary" if.bind="content.description">
          ${content.description ? content.description : 'No description given'}
        </div>
      </div>
      <div class="actions">
        <button type="button" class="btn btn-primary btn-outline mono-font" click.trigger="reload()" if.bind="content">
          <i class="fas fa-sync"></i> Reload
        </button>
        <a href="https://github.com/williamthom-as/cure/tree/main/docs" target="_blank">
          Help <i class="fas fa-question-circle" aria-hidden="true"></i>
        </a>
      </div>
    </div>
  
    <div class="tile-container" if.bind="content.panels">
      <div class="tile" repeat.for="panel of content.panels">
        <panel>
          <div slot="header">
            <div class="title">${panel.title}</div>
          </div>
          <div slot="body">
            <div if.bind="panel.widgetType == 'markdown'">
              <div innerhtml.bind="panel.data.content"></div>
            </div>
            <div if.bind="panel.widgetType == 'table'">
              <dyn-table data.bind="panel.data"></div>
            </div>
          </div>
        </panel>
      </div>
    </div>
  </div>
</template>